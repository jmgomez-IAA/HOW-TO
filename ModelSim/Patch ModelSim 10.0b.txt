Descargar ModelSim 

http://www.sonsivri.to/forum/index.php?topic=39121.msg119151#msg119151


http://www.sonsivri.to/forum/index.php?topic=27854.0


Here are the instructions:

1. Install ModelSim from the downloaded torrent.

2. Modify a script in ModelSim install dir to get ModelSim working with Linux Kernel 3 and later, see (*1) below.

3. Try to run bin/vsim to verify that 1. and 2. were successful. This should by now generate a license error.

4. Determine the machine ID. For ModelSim in Linux, this is the MAC adress of the ethernet interface. Execute '/sbin/ifconfig eth0' which will give an output similar to:

$ /sbin/ifconfig eth0
eth0      Link encap:Ethernet  HWaddr 01:23:45:67:89:ab

Remove the colons and you get the 12-digit machine ID that the keygen wants, in this case, 0123456789ab.

5. Copy MentorKg.exe into the ModelSim install dir

6. Add write permissions to the ModelSim install dir so the keygen can write the generated license file into the dir (generating with sudo, e.g. 'sudo wine MentorKG.exe...' didn't work for me for some reason, also I believe you shouldn't run wine with sudo). This can be done by 'sudo chmod a+w modeltech', if modeltech is the name of the install dir, and you're in the directory directly above it. Running 'll' should list the install dir as something like

drwxr-xr-x 34 root root 4096 2011-10-25 21:32 modeltech/

7. Add write permissions to the file to be patched so the keygen can patch it by executing 'sudo chmod a+w ./linux/mgls/lib/mgc.pkginfo'

8. Make a backup of the file by executing 'sudo cp ./linux/mgls/lib/mgc.pkginfo ./linux/mgls/lib/mgc.pkginfo_old' when in the ModelSim install dir.

9. Create a dummy file named 'mgls.dll' in /linux/mgls/lib/, it can be empty or have any contents, and give it full write permissions (I don't know if this is neccessary - this is a file that is present in a Windows installation and the Keygen needs to patch it in Windows - it might give error messages if it doesn't find this file.)

10. It's time for the critical step - to run the keygen. This is the command I used, and the output it generated. This was executed in the ModelSim install dir. Replace 0123456789ab with your actual machine ID determined earlier.

modeltech$ wine MentorKG.exe -o license1.dat -h 0123456789ab -all -exp 12/01/2025 -pkg ./linux/mgls/lib/mgc.pkginfo
fixme:heap:HeapSetInformation 0x4a2000 0 0x32fe60 4
Mentor Graphics MGCLD License KeyGen V8.0
2011 by Team EFA (Eda For All).

Package:  ./linux/mgls/lib/\mgc.pkginfo v: 3.1_0.1i
Features: 217/3945 Atomic, 74/1088 Extended, 1210/1216 Composite and 4 Eval
Used:      1501 features                            
modeltech$

Some comments on the options I used (run 'wine MentorKG.exe -?' for more info on the options):
-h 0123456789ab: uses this machine ID instead of letting the keygen try to find the right one on its own
-all: generate a license for all features
-exp 12/01/2025: sets this expiration date. Default is four years from todays date, I thought that was a bit too little. There is some maximum, 30 years from current date or so.
-pkg ./linux/mgls/lib/mgc.pkginfo: states the location of the file to patch - this was neccessary for me, the Keygen wouldn't find the right place of this file on its own.

If the above gives an error message like "Could not find package info" or similar, I believe it's because the mgc.pkginfo file wasn't found.

11. Make sure the license file was generated by 'll license1.dat'. If it doesn't show up, something is wrong. Make sure the dir has full write permissions.

12. Make sure mgc.pkginfo was actually patched by checking that its time stamp changed. This is what I executed and the output I got:

modeltech$ ll ./linux/mgls/lib/mgc.pkginfo*
-rwxrwxrwx 1 root root 1015072 2010-06-17 05:50 ./linux/mgls/lib/mgc.pkginfo*
-rwxrwxrwx 1 root root 1015072 2011-10-25 21:26 ./linux/mgls/lib/mgc.pkginfo_old*
modeltech$

...so, the time stamp was changed, however oddly enough to an earlier date, although my system time is correct.

Environment variables are needed to specify the location of the license file for ModelSim. Execute the two commands:

export LM_LICENSE_FILE=/misc/license1.dat
export MGLS_LICENSE_FILE=${LM_LICENSE_FILE}

...where on the first line you give the absolute path to the license file. I copied it to another directory, /misc/, which I believe is a good idea, but if you just followed the instructions above, it should still be in the ModelSim install dir. Make sure the file and its full path have full read permissions.

13. Moment of truth: try it. From the ModelSim install dir, execute 'bin/vsim'.

14. The environment variables will not persist after a re-boot so you need to run the two above commands automatically at each start-up. Add them to ~/.bashrc for Ubuntu, for other distributions you need to determine which file corresponds to this. The lines can be added anywhere in the file. Also, the following line should be added:

export PATH=$PATH:/opt/ModelSim6.5f/modeltech/bin

...so the ModelSim executable can be executed from any dir.


*1:

First, check if this is really neccessary (it was for me and probably is if you're running Linux Kernel 3 or later, if you're not installing a later version of ModelSim which has this problem fixed). Try executing ModelSim by 'bin/vsim' in the install dir. If you get an error message that is something like "Error: cannot find [?]/bin/../linux_rh60/vsim" you need to make this change, if on the other hand you get a license error you can just move on.

If you get the linux_rh60 error message, do the following: Change the lines beginning at line 198 in the script text file 'vco' in the ModelSim install dir, which now reads:

Code:

case $utype in
  2.4.[7-9]*)       vco="linux" ;;
  2.4.[1-9][0-9]*)  vco="linux" ;;
  2.[5-9]*)         vco="linux" ;;
  2.[1-9][0-9]*)    vco="linux" ;;
  *)                vco="linux_rh60" ;;
esac


...into:

Code:

case $utype in
  2.4.[7-9]*)       vco="linux" ;;
  2.4.[1-9][0-9]*)  vco="linux" ;;
  2.[5-9]*)         vco="linux" ;;
  2.[1-9][0-9]*)    vco="linux" ;;
  3.[0-9]*)         vco="linux" ;;
  *)                vco="linux_rh60" ;;
esac


...by just adding that line on the end for Linux Kernel 3.


Some comments on error messages:
- If the environment variables are not set or don't point to a readable license file, it seems like an error message about licensing is showed at the prompt after executing vsim, without the GUI ever opening up.
- If the license file is found but isn't working for some reason, it seems like the GUI does open up but immediately gives an error message, "Unable to checkout a viewer license necessary for use of the ModelSim graphical user interface. Vsim is closing."


So, that's it. Good luck. If you discover anything that could help others, I urge you to do like me and make a post.

EDIT: just make sure you don't  double post, you get Muted for that



 
MY MAC: C8:60:00:C7:7D:D4
MY ID:  C86000C77DD4